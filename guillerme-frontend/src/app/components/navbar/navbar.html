<nav class="navbar-fixed navbar-mobile">

  <!-- TOP BAR REDES -->
  <div class="topbar">
    <div class="topbar-inner">
      <div class="topbar-left">
        <!-- opcional: texto / promo -->
        <!-- <span class="topbar-text">Env√≠os a todo el pa√≠s</span> -->
      </div>

      <div class="topbar-right">
        <a class="social-link" href="https://www.instagram.com/guillerme.guillerme.589" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M7.5 2h9A5.5 5.5 0 0 1 22 7.5v9A5.5 5.5 0 0 1 16.5 22h-9A5.5 5.5 0 0 1 2 16.5v-9A5.5 5.5 0 0 1 7.5 2zm9 2h-9A3.5 3.5 0 0 0 4 7.5v9A3.5 3.5 0 0 0 7.5 20h9a3.5 3.5 0 0 0 3.5-3.5v-9A3.5 3.5 0 0 0 16.5 4z"/>
            <path d="M12 7a5 5 0 1 1 0 10 5 5 0 0 1 0-10zm0 2a3 3 0 1 0 0 6 3 3 0 0 0 0-6z"/>
            <path d="M17.7 6.3a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"/>
          </svg>
        </a>

        <a class="social-link" href="https://www.facebook.com/guillerme.guillerme.589" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M13.5 22v-8h2.6l.4-3H13.5V9.1c0-.9.3-1.6 1.6-1.6h1.6V4.8c-.3 0-1.3-.1-2.5-.1-2.5 0-4.2 1.5-4.2 4.3V11H7.5v3H10v8h3.5z"/>
          </svg>
        </a>

        <a class="social-link" href="https://www.tiktok.com/@guillermeguillerme?_r=1&_t=ZS-93ksEaOcq3s" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M14 3v10.2a3.6 3.6 0 1 1-3-3.5V7.6a6.2 6.2 0 1 0 5 6.1V8.4c1.1.8 2.5 1.3 4 1.3V6.8c-2 0-3.6-1.6-3.6-3.6H14z"/>
          </svg>
        </a>

        <a class="social-link" href="https://wa.me/5491138617954?text=Hola!%20Quiero%20hacer%20una%20consulta" target="_blank" rel="noopener noreferrer" aria-label="WhatsApp">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 2a9.9 9.9 0 0 0-8.6 14.9L2 22l5.3-1.4A9.9 9.9 0 1 0 12 2zm0 18a8 8 0 0 1-4.1-1.1l-.3-.2-3.1.8.8-3-.2-.3A8 8 0 1 1 12 20z"/>
            <path d="M16.6 13.9c-.2-.1-1.3-.6-1.5-.7-.2-.1-.4-.1-.5.1l-.7.8c-.1.2-.3.2-.5.1-.2-.1-1-.4-1.9-1.3-.7-.6-1.1-1.4-1.2-1.6-.1-.2 0-.4.1-.5l.5-.6c.1-.1.1-.3.1-.4l-.1-.4c-.1-.2-.5-1.2-.7-1.6-.2-.4-.4-.3-.5-.3h-.4c-.1 0-.4.1-.6.3-.2.2-.8.8-.8 2 0 1.2.8 2.3.9 2.4.1.1 1.6 2.5 3.9 3.4.6.3 1 .4 1.4.5.6.2 1.1.2 1.5.1.5-.1 1.3-.5 1.5-1 .2-.5.2-1 .2-1.1 0-.1-.2-.2-.4-.3z"/>
          </svg>
        </a>

        <!-- ‚úÖ USER SOLO MOBILE (en topbar) -->
          <div class="user-menu user-menu--mobileTop" (click)="$event.stopPropagation()">

            <!-- üîì NO LOGUEADO -->
            <ng-container *ngIf="!isLogged()">
              <a class="userTopLink" routerLink="/login" aria-label="Ingresar">
                
                <span class="userIcon" aria-hidden="true">
                  <svg class="userIconSvg" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="12"></circle>
                    <circle cx="12" cy="9" r="4"></circle>
                    <path d="M4.5 20.2c1.9-3.6 4.6-5.2 7.5-5.2s5.6 1.6 7.5 5.2"></path>
                  </svg>
                </span>

                <span class="userTopText">Ingresar</span>

              </a>
            </ng-container>

            <!-- üîê LOGUEADO -->
            <ng-container *ngIf="isLogged()">
              <button
                type="button"
                class="user-trigger user-trigger--top"
                (click)="toggleUserMenu()"
                aria-label="Abrir men√∫ de usuario"
                [attr.aria-expanded]="userMenuOpen()"
              >
                <span class="userIcon" aria-hidden="true">
                  <svg class="userIconSvg" viewBox="0 0 24 24">
                    <circle cx="12" cy="12" r="12"></circle>
                    <circle cx="12" cy="9" r="4"></circle>
                    <path d="M4.5 20.2c1.9-3.6 4.6-5.2 7.5-5.2s5.6 1.6 7.5 5.2"></path>
                  </svg>
                </span>
              </button>

              <div class="user-dropdown user-dropdown--top" *ngIf="userMenuOpen()">

                <div class="user-dropdown-head user-dropdown-head--top">
                  <div class="user-name">{{ email() }}</div>
                </div>

                <div class="user-dropdown-sep"></div>

                <button *ngIf="isAdmin()" class="user-item" type="button" (click)="goAdminProducts()">
                  Admin productos
                </button>

                <button class="user-item" type="button" (click)="goOrders()">
                  Ver pedidos
                </button>

                <button class="user-item danger" type="button" (click)="logout()">
                  Salir
                </button>
              </div>
            </ng-container>

          </div>

      </div>
    </div>
  </div>

  <div class="row">
    <div class="navbar col-12 d-flex justify-content-around align-items-center mobile">

      <div class="logo d-flex justify-content-center align-items-center mobile">
        <img class="logo-img" src="assets/sinfondo-guillerme.png" alt="Guillerme" />
        <ng-content></ng-content>
      </div>

      <div
        class="menu-items d-flex justify-content-around align-items-center"
        [ngClass]="{ 'open': menuOpen() }"
      >
        <a class="all sm-mini-phone all-colour" href="#servicios" (click)="closeMenu()">INICIO</a>

        <!-- PRODUCTOS (dropdown) -->
        <div class="nav-item dropdown" [class.open]="productsOpen()">
          <button
            type="button"
            class="all nav-link-btn"
            (click)="toggleProductsMenu($event)"
            aria-haspopup="true"
            [attr.aria-expanded]="productsOpen()"
          >
            PRODUCTOS <span class="user-plus">‚ñæ</span>
          </button>

          <div class="dropdown-menu-custom">
            <a class="dropdown-item" href="#producto" (click)="goProducts('all'); $event.preventDefault()">Todos los productos</a>
            <a class="dropdown-item" href="#producto" (click)="goProducts('libreria'); $event.preventDefault()">Librer√≠a</a>
            <a class="dropdown-item" href="#producto" (click)="goProducts('combos'); $event.preventDefault()">Combos</a>
            <a class="dropdown-item" href="#producto" (click)="goProducts('varios'); $event.preventDefault()">Varios</a>
          </div>
        </div>

        <a class="all" href="#nosotros" (click)="closeMenu()">NOSOTROS</a>
        <a class="all" href="#nosotros" (click)="closeMenu()">CONTACTO</a>

        <!-- BUSCADOR SOLO DESKTOP -->
        <div class="nav-search nav-search--desktop" (click)="$event.stopPropagation()">
          <app-header></app-header>
        </div>

        <!-- Auth: SOLO DESKTOP (en mobile va en topbar) -->
        <a *ngIf="!isLogged()" class="all nav-login--desktop" routerLink="/login" (click)="closeMenu()">INGRESAR</a>

        <!-- ‚úÖ USER SOLO DESKTOP -->
        <div *ngIf="isLogged()" class="user-menu user-menu--desktop" (click)="$event.stopPropagation()">
          <button
            type="button"
            class="user-trigger"
            (click)="toggleUserMenu()"
            aria-label="Abrir men√∫ de usuario"
          >
            <span class="user-email">{{ email() }}</span>
            <span class="user-plus">‚ñæ</span>
          </button>

          <div class="user-dropdown" *ngIf="userMenuOpen()">
            <button *ngIf="isAdmin()" class="user-item" type="button" (click)="goAdminProducts()">Admin productos</button>
            <button class="user-item" type="button" (click)="goOrders()">Ver pedidos</button>
            <button class="user-item danger" type="button" (click)="logout()">Salir</button>
          </div>
        </div>
      </div>

      <!-- CARRITO + LUPA + HAMBURGER -->
      <div class="carrito d-flex justify-content-center align-items-center gap-3" *ngIf="!isAdmin()">

        <!-- CARRITO -->
        <div class="container-cart">
          <button class="botonCarrito" type="button" (click)="$event.stopPropagation(); openCart()">
            <svg width="57" height="57" viewBox="0 0 57 57" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M9.95499 40.4516C11.0522 45.9355 11.6009 48.6763 13.5697 50.2912C15.541 51.9062 18.3364 51.9062 23.9295 51.9062H33.8142C39.4074 51.9062 42.2027 51.9062 44.1716 50.2912C46.1429 48.6763 46.6891 45.9355 47.7887 40.4516L49.2137 33.3266C50.7907 25.4416 51.5792 21.4991 49.4417 18.889C47.3042 16.2812 43.281 16.2812 35.2392 16.2812H22.5069C14.4651 16.2812 10.4419 16.2812 8.30437 18.889C6.16687 21.4968 6.95537 25.4392 8.53237 33.3266L9.95499 40.4516Z" fill="#45ACB4"/>
              <path d="M35.9961 25.7812C37.3078 25.7812 38.3711 24.7179 38.3711 23.4062C38.3711 22.0946 37.3078 21.0312 35.9961 21.0312C34.6844 21.0312 33.6211 22.0946 33.6211 23.4062C33.6211 24.7179 34.6844 25.7812 35.9961 25.7812Z" fill="#EDDA6A"/>
              <path d="M21.7461 25.7812C23.0578 25.7812 24.1211 24.7179 24.1211 23.4062C24.1211 22.0946 23.0578 21.0312 21.7461 21.0312C20.4344 21.0312 19.3711 22.0946 19.3711 23.4062C19.3711 24.7179 20.4344 25.7812 21.7461 25.7812Z" fill="#EDDA6A"/>
              <path d="M23.5273 13.9063C23.5273 12.489 24.0903 11.1298 25.0925 10.1276C26.0946 9.1255 27.4538 8.5625 28.8711 8.5625C30.2883 8.5625 31.6475 9.1255 32.6497 10.1276C33.6518 11.1298 34.2148 12.489 34.2148 13.9063V16.2813H35.2385C36.1338 16.2813 36.9793 16.2813 37.7773 16.286V13.9063C37.7773 11.5442 36.839 9.27883 35.1688 7.60858C33.4985 5.93833 31.2332 5 28.8711 5C26.509 5 24.2437 5.93833 22.5734 7.60858C20.9032 9.27883 19.9648 11.5442 19.9648 13.9063V16.286C20.7628 16.2813 21.6083 16.2813 22.5037 16.2813H23.5273V13.9063Z" fill="#EDDA6A"/>
            </svg>
          </button>

          <p class="numeroCarrito">{{ store.cartCount() }}</p>
        </div>

        <!-- HAMBURGER -->
        <button class="hamburger hamburger--spring"
                type="button"
                (click)="$event.stopPropagation(); toggleMenu()">
          <span class="hamburger-box">
            <span class="hamburger-inner"></span>
          </span>
        </button>

      </div>
    </div>
  </div>

 
  <!-- BLOQUE BUSCADOR SOLO MOBILE (siempre visible) -->
<div class="mobileSearchBlock">
  <app-header></app-header>
</div>

</nav>
