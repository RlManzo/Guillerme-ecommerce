<ng-container *ngIf="producto(); else sinProducto">
  <div class="lks-detail">
    <!-- izquierda -->
    <div class="lks-left">
      <!-- ✅ Imagen grande cambia con el thumb -->
      <img
        class="lks-main-img"
        [src]="bigImg()"
        [alt]="producto()!.nombre"
      />

      <!-- ✅ Thumbs reales -->
      <div class="lks-thumbs" *ngIf="imagenes().length > 1">
  <button
    class="lks-thumb"
    type="button"
    *ngFor="let url of imagenes()"
    (click)="selectImg(url)"
    [class.active]="selectedImg() === url"
  >
    <img [src]="url" [alt]="producto()!.nombre" />
  </button>
</div>
    </div>

    <!-- derecha -->
    <div class="lks-right">
      <h2 class="lks-title">{{ producto()!.nombre }}</h2>
      <div class="lks-underline"></div>

      <ul
        class="lks-bullets"
        *ngIf="splitInfo(producto()!.infoModal).length; else sinBullets"
      >
        <li *ngFor="let it of splitInfo(producto()!.infoModal)">{{ it }}</li>
      </ul>

      <ng-template #sinBullets>
        <p class="lks-desc">{{ producto()!.infoModal }}</p>
      </ng-template>

      <div class="lks-row">
        <div class="lks-label">Categoría:</div>
        <div class="lks-value">
          {{
            producto()!.categorias?.length
              ? producto()!.categorias!.join(', ')
              : '-'
          }}
        </div>
      </div>

      <div class="lks-chips" *ngIf="producto()!.keywords?.length">
        <span class="lks-chip" *ngFor="let k of producto()!.keywords">
          {{ k }}
        </span>
      </div>

      <div class="lks-row">
        <div class="lks-label">Precio:</div>
        <div class="lks-value">
          {{ (producto()!.precio ?? 0) | currency:'ARS':'symbol':'1.0-0' }}
        </div>
      </div>

      <div class="lks-row">
        <div class="lks-label">Stock:</div>
        <div class="lks-value">{{ producto()!.stock ?? 0 }}</div>
      </div>

      <div class="lks-actions">
        <button class="lks-btn primary" type="button" (click)="onAgregar()">
          AGREGAR
        </button>

        <button class="lks-btn secondary" type="button" (click)="onClose()">
          CANCELAR
        </button>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #sinProducto>
  <div class="text-center p-4">
    <p class="m-0">No hay producto seleccionado.</p>
  </div>
</ng-template>
